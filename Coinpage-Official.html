<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>NebulaX • Coin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
<script src="nx-theme.js"></script>
<style>
  :root {
    --nx-cyan:#00e6ff; --nx-dark:#0a0d1b; --nx-dark-2:#12152a;
    --nx-border:#1e2747; --nx-text:#e0e7ff;
  }
  html[data-theme="amber"]{ --nx-cyan:#ffb020; --nx-dark:#0b0b14; --nx-dark-2:#15162a; --nx-border:#2a2647; --nx-text:#ffeccc; }
  html[data-theme="violet"]{ --nx-cyan:#b69cff; --nx-dark:#0a0a16; --nx-dark-2:#131329; --nx-border:#27224a; --nx-text:#eae4ff; }
  html[data-theme="neon"]{ --nx-cyan:#55ffda; --nx-dark:#070b12; --nx-dark-2:#0d1220; --nx-border:#1a243a; --nx-text:#dbfff7; }

  .nx-tab { padding:.4rem .6rem; border-radius:.7rem; border:1px solid transparent; font-size:.85rem; }
  .nx-tab.active { border-color:var(--nx-border); background:rgba(255,255,255,.03); color:var(--nx-cyan); }
  .nx-btn { font-size:.8rem; padding:.35rem .6rem; border-radius:.6rem; border:1px solid var(--nx-border); }
  .nx-btn-outline { font-size:.8rem; padding:.35rem .6rem; border-radius:.6rem; border:1px dashed var(--nx-border); background:transparent; }
  input::placeholder { color: #7a86a8; }
</style>
    <style>
      :root{
        --nx-cyan:#00e6ff;
        --nx-dark:#0a0d1b;
        --nx-dark-2:#12152a;
        --nx-border:#1e2747;
        --nx-text:#e0e7ff;
        --page-max: 1400px;
        /* Adrenaline sidebar */
        --ad-w: 360px;
        --ad-gap: 18px;
      }
      html,body{height:100%; background:var(--nx-dark); font-family:'Orbitron','ui-monospace','SFMono-Regular',monospace; color:var(--nx-text);}
      .page-wrap{max-width:var(--page-max); margin:18px auto; padding:0 12px;}

      /* Panels */
      .nx-panel{
        background:rgba(16,20,40,.92);
        border:1px solid var(--nx-border);
        box-shadow: inset 0 0 10px rgba(0,230,255,.18), 0 0 12px rgba(0,230,255,.08);
        backdrop-filter: blur(8px);
        border-radius: 16px;
      }
      .nx-title{color:#ffeb3b;text-shadow:0 0 3px #ffeb3b;}
      .tabnums{font-variant-numeric: tabular-nums;}

      /* Buttons */
      .nx-btn{
        border-radius:14px; padding:.42rem .72rem; font-weight:700;
        transition:transform .05s ease, opacity .18s ease, box-shadow .18s ease;
        border:1px solid var(--nx-border); background:var(--nx-dark-2); color:var(--nx-text);
      }
      .nx-btn:hover{opacity:.95}
      .nx-btn:active{transform:translateY(1px)}
      .nx-btn-cyan{ background:var(--nx-cyan); color:#0b101b; border-color:#0d3540; box-shadow:0 0 10px rgba(0,230,255,.3); }
      .nx-btn-red{ background:#ef4444; color:#1b0707; }
      .nx-btn-green{ background:#10b981; color:#00130f; }

      /* Tabs (only active cyan) */
      .tab{
        border-radius:10px; padding:.45rem .8rem; font-weight:700;
        border:1px solid var(--nx-border); background:var(--nx-dark-2); color:#a5b4fc;
      }
      .tab.active{ background:var(--nx-cyan); color:#041018; box-shadow:0 0 10px rgba(0,230,255,.35); }

      /* Presets */
      .preset-btn{ padding:.38rem .6rem; font-size:.9rem; border-radius:12px; }
      .preset-btn.active{ background:var(--nx-cyan); color:#041018; border-color:#0d3540; box-shadow:0 0 10px rgba(0,230,255,.35); }

      /* Inputs */
      .nx-input{
        width:100%; border-radius:12px; border:1px solid var(--nx-border);
        background:var(--nx-dark-2); color:var(--nx-text); padding:.55rem .7rem; outline:none;
      }
      .nx-input:focus{border-color:var(--nx-cyan); box-shadow:0 0 0 2px rgba(0,230,255,.14)}

      /* Scrollbar */
      ::-webkit-scrollbar{width:10px;height:10px}
      ::-webkit-scrollbar-track{background:var(--nx-dark-2);border:1px solid #1b2450;border-radius:6px;box-shadow:inset 0 0 8px rgba(0,230,255,.12)}
      ::-webkit-scrollbar-thumb{border-radius:6px;background:var(--nx-cyan);box-shadow:0 0 8px rgba(0,230,255,.35);border:2px solid var(--nx-dark-2)}
      ::-webkit-scrollbar-thumb:hover{background:#6ff3ff}
      *{scrollbar-width:thin; scrollbar-color: var(--nx-cyan) var(--nx-dark-2)}

      /* Popovers */
      .popover{position:absolute; z-index:1000; border:1px solid var(--nx-border); background:rgba(13,16,34,.98); box-shadow:0 10px 30px rgba(0,0,0,.4); border-radius:12px;}

      /* SEARCH styling */
      #search-wrap:focus-within .nx-input{ border-color:var(--nx-cyan); box-shadow:0 0 0 2px rgba(0,230,255,.14); }
      .search-row{ display:flex; align-items:center; gap:.75rem; padding:.45rem .6rem; border-radius:10px; }
      .search-row:hover{ background: var(--nx-dark-2); }
      .search-icon{ height:2rem; width:2rem; display:flex; align-items:center; justify-content:center; border-radius:8px; background:var(--nx-dark-2); }
      .search-grid{ display:grid; grid-template-columns: 1fr auto auto auto; gap:.75rem; align-items:center; min-width:0; }
      .search-name{ min-width:0; }
      .search-name .ticker{ font-size:11px; color:#8b97c9; }
      .search-metric{ font-size:11px; color:#9fb3ff; white-space:nowrap; }
      .search-active{ outline:2px solid var(--nx-cyan); outline-offset:2px; }

      /* === Adrenaline overlay — left of LEFT panel, full panel height === */
      #leftColPanel{ position:relative; overflow:visible; }
      #leftColPanel .ad-slot{ position:absolute; inset:0; overflow:visible; pointer-events:none; z-index:6; }

      /* Vertical tab */
      #leftColPanel .adrenaline-tab{
        position:absolute; top:50%; left:-42px; transform:translateY(-50%);
        width:28px; height:140px; border-radius:16px; backdrop-filter:blur(6px);
        background:rgba(10,16,28,.85); border:1.5px solid #00E5FF;
        box-shadow:0 0 10px rgba(0,229,255,.45), 0 0 24px rgba(0,229,255,.28) inset;
        cursor:pointer; pointer-events:auto;
      }
#leftColPanel .adrenaline-tab span{
  writing-mode: vertical-lr;
  text-orientation: mixed;
  transform: rotate(180deg);
  transform-origin: center;
}

      #leftColPanel .adrenaline-tab::before{
        content:""; position:absolute; inset:-3px; border-radius:inherit; pointer-events:none;
        box-shadow:0 0 12px rgba(0,229,255,.55), 0 0 28px rgba(0,229,255,.35);
        animation: ad-flame 2.1s ease-in-out infinite alternate;
      }
      @keyframes ad-flame{
        0%{ box-shadow:0 0 10px rgba(0,229,255,.45), 0 0 20px rgba(0,229,255,.25); }
        100%{ box-shadow:0 0 18px rgba(0,229,255,.75), 0 0 36px rgba(0,229,255,.45); }
      }

      #leftColPanel .adrenaline-panel{
        position:absolute;
        top:0; bottom:0;                         /* full height of left panel */
        left: calc(-1 * (var(--ad-w) + var(--ad-gap)));
        width: var(--ad-w);
        border-radius:18px; overflow:hidden;
        background:rgba(8,12,22,.96);
        border:1px solid rgba(0,229,255,.35);
        box-shadow:0 0 40px rgba(0,229,255,.22);
        transform: translateX(-110%);            /* hidden by default */
        transition: transform .28s cubic-bezier(.22,.61,.36,1);
        pointer-events:none;
      }
      #leftColPanel .adrenaline-panel.open{
        transform: translateX(0);
        pointer-events:auto;
      }
      #leftColPanel .ad-header{
        display:flex; align-items:center; gap:12px;
        padding:12px 14px; border-bottom:1px solid rgba(0,229,255,.18);
      }
      #leftColPanel .ad-title{ font-weight:800; color:#BDF0FF; letter-spacing:.4px; }
      #leftColPanel .ad-views{
        margin-left:auto; display:inline-flex; gap:6px;
        background: rgba(255,255,255,.02);
        padding:4px; border-radius:12px; border:1px solid rgba(255,255,255,.06);
      }
      #leftColPanel .ad-view{
        font:inherit; padding:6px 10px; border-radius:8px;
        background:transparent; color:#9ab4ff; border:1px solid transparent;
      }
      #leftColPanel .ad-view.is-active{
        color:#061926; background:#19E5FF; border-color:rgba(0,229,255,.6);
        box-shadow:0 0 14px rgba(0,229,255,.35);
      }
      #leftColPanel .ad-close{
        margin-left:6px; width:28px; height:28px; line-height:26px;
        border-radius:8px; border:1px solid rgba(255,255,255,.08);
        background:rgba(255,255,255,.03); color:#a8b0c8;
      }
      #leftColPanel .ad-body{ height: calc(100% - 54px); }
      #leftColPanel #adrenalineFrame{ width:100%; height:100%; border:0; background:transparent; }

      /* Create room while open so nothing overflows */
      @media (min-width: 1024px){
        #mainGrid.ad-open{
          padding-left: calc(var(--ad-w) + var(--ad-gap));
          transition: padding-left .28s cubic-bezier(.22,.61,.36,1);
        }
      }
      /* Optional slightly smaller variant for narrower desktops */
      @media (max-width:1280px){
        :root{ --ad-w: 320px; --ad-gap: 16px; }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="sticky top-0 z-[1000] isolate border-b border-[var(--nx-border)] bg-[rgba(10,13,27,0.9)] backdrop-blur-sm">
      <div class="page-wrap h-7 px-1 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <a href="NebulaX.html" class="flex items-center gap-2">
            <img src="NebulaX-logo.png" class="h-6 w-6 rounded-md" alt="NebulaX"/>
            <span class="font-bold tracking-wide" style="text-shadow:0 0 2px var(--nx-cyan);">NEBULAX</span>
          </a>
          <nav class="hidden sm:flex items-center gap-2 ml-2">
            <a class="nx-btn px-2 py-1 text-xs" href="NebulaX.html">Home</a>
            <a class="nx-btn px-2 py-1 text-xs" href="NewPairs-official.html">New Pairs</a>
            <a class="nx-btn px-2 py-1 text-xs" href="Trending.html">Trending</a>
            <a class="nx-btn px-2 py-1 text-xs" href="portfolio_official_v_2_fixed.html">Portfolio</a>
            <a class="nx-btn px-2 py-1 text-xs" href="Adrenaline-official.html">Adrenaline</a>
            <a class="nx-btn px-2 py-1 text-xs" href="nebula_x_store_official.html">Store</a>
          </nav>
        </div>

        <!-- SEARCH -->
        <div id="search-wrap" class="relative w-[26rem] max-w-[60vw]">
          <input id="search-input" class="nx-input" placeholder="Search markets... /" autocomplete="off"/>
          <div id="search-dd" class="popover hidden mt-1 w-full max-h-[22rem] overflow-auto p-2"></div>
        </div>

        <div class="flex items-center gap-2">
          <button id="wallet-btn" class="nx-btn"><i data-lucide="wallet" class="w-3 h-3 mr-2"></i> Bal: 0.214 SOL</button>
        </div>
      </div>
    </header>

    <div class="page-wrap">
      <!-- Stats row -->
      <section class="mt-3">
        <div class="nx-panel p-3">
          <div class="grid grid-cols-2 md:grid-cols-6 gap-2 text-sm">
            <div class="nx-btn tabnums">Market Cap: <span class="ml-1 text-emerald-400">—</span></div>
            <div class="nx-btn tabnums">Price: <span class="ml-1 text-emerald-400">—</span></div>
            <div class="nx-btn tabnums">Liquidity: <span class="ml-1 text-emerald-400">—</span></div>
            <div class="nx-btn tabnums">Supply: <span class="ml-1 text-emerald-400">—</span></div>
            <div class="nx-btn tabnums">24h Vol (mock): <span class="ml-1 text-emerald-400">—</span></div>
            <div class="flex justify-end">
              <button id="alerts-open" class="nx-btn nx-btn-cyan"><i data-lucide="bell-plus" class="w-4 h-4 mr-2"></i>Alerts</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Main two-column -->
      <main id="mainGrid" class="mt-3 grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-3">
        <!-- LEFT -->
        <section id="leftColPanel" class="nx-panel p-3">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="h-5 w-5 rounded-full bg-[var(--nx-dark-2)] border border-[var(--nx-border)]"></div>
              <div class="text-lg nx-title">NEBULAX (NEBX) — Nebula Exchange Token</div>
            </div>
            <div class="flex items-center gap-2">
              <button class="nx-btn h-8 w-8 grid place-items-center" title="More"><i data-lucide="more-horizontal" class="w-4 h-4"></i></button>
              <button class="nx-btn h-8 w-8 grid place-items-center" title="Star"><i data-lucide="star" class="w-4 h-4"></i></button>
              <button class="nx-btn h-8 w-8 grid place-items-center" title="Share"><i data-lucide="share-2" class="w-4 h-4"></i></button>
            </div>
          </div>

          <!-- CHART CARD -->
          <div class="mt-3 relative nx-panel p-2 h-[420px]" id="coinChartPanel">
            <button class="absolute top-2 right-2 nx-btn nx-btn-cyan text-xs px-2 py-1">1m</button>
            <div class="w-full h-full bg-[#090d16] grid place-items-center rounded-[12px] border border-[var(--nx-border)]">
              <div class="text-zinc-400 text-sm">Chart Placeholder (Integrate TradingView or similar later)</div>
            </div>
          </div>

          <!-- Tabs -->
          <div class="mt-3 flex items-center gap-2 overflow-x-auto">
            <button class="tab active" data-tab="orderbook">Order Book</button>
            <button class="tab" data-tab="trades">Live Trades</button>
            <button class="tab" data-tab="holders">Holders</button>
            <button class="tab" data-tab="toptraders">Top Traders</button>
          </div>

          <div id="tab-content" class="mt-2 nx-panel p-3 text-sm">
            Tab Content Placeholder (e.g., Order Book Data)
          </div>

          <!-- === Adrenaline overlay slot (attached to the LEFT PANEL) === -->
          <div class="ad-slot" aria-hidden="true">
            <button class="adrenaline-tab" id="adrenalineTab" aria-controls="adrenalinePanel" aria-expanded="false">
              <span>Adrenaline</span>
            </button>

            <aside class="adrenaline-panel" id="adrenalinePanel" role="dialog" aria-modal="false" aria-hidden="true">
              <div class="ad-header">
                <div class="ad-title">Adrenaline</div>
                <div class="ad-views" role="tablist" aria-label="Adrenaline views">
                  <button class="ad-view is-active" data-view="new" role="tab" aria-selected="true">New</button>
                  <button class="ad-view" data-view="migrating" role="tab" aria-selected="false">Migrating</button>
                  <button class="ad-view" data-view="migrated" role="tab" aria-selected="false">Migrated</button>
                </div>
                <button class="ad-close" id="adrenalineClose" aria-label="Close">✕</button>
              </div>
              <div class="ad-body">
                <iframe id="adrenalineFrame"
                        title="Adrenaline table"
                        loading="lazy"
                        referrerpolicy="no-referrer"
                        src="Adrenaline-official.html?embed=1&view=new"></iframe>
              </div>
            </aside>
          </div>
          <!-- === /Adrenaline overlay slot === -->
        </section>

        <!-- RIGHT -->
        <aside class="nx-panel p-3">
          <div class="grid grid-cols-2 gap-2">
            <button id="buy-btn"  class="nx-btn nx-btn-green">Buy</button>
            <button id="sell-btn" class="nx-btn nx-btn-red">Sell</button>
          </div>

          <!-- Market/Limit toggle -->
          <div class="grid grid-cols-2 gap-2 mt-2">
            <button id="mkt-btn" class="nx-btn nx-btn-cyan">Market</button>
            <button id="lim-btn" class="nx-btn">Limit</button>
          </div>

          <div class="mt-3 space-y-2">
            <label class="text-sm">Amount (SOL)</label>
            <input id="amt" class="nx-input tabnums" placeholder="0.0"/>

            <div id="tp-sl" class="grid grid-cols-2 gap-2">
              <div>
                <label class="text-sm">TP %</label>
                <input id="tp" class="nx-input tabnums" placeholder=""/>
              </div>
              <div>
                <label class="text-sm">SL %</label>
                <input id="sl" class="nx-input tabnums" placeholder=""/>
              </div>
            </div>

            <div class="grid grid-cols-3 gap-2">
              <button class="nx-btn preset-btn" id="preset-1" data-preset="1">Preset 1</button>
              <button class="nx-btn preset-btn" id="preset-2" data-preset="2">Preset 2</button>
              <button class="nx-btn preset-btn" id="preset-3" data-preset="3">Preset 3</button>
            </div>

            <div id="preset-config" class="hidden">
              <div class="grid grid-cols-2 gap-2 mt-2">
                <div>
                  <label class="text-xs text-zinc-400">Fee (SOL)</label>
                  <input id="fee-sol" type="number" step="0.0001" min="0" class="nx-input tabnums" placeholder="0.001" />
                </div>
                <div>
                  <label class="text-xs text-zinc-400">MEV Protection</label>
                  <button id="mev-btn" class="nx-btn w-full">On</button>
                </div>
              </div>
              <div class="grid grid-cols-2 gap-2 mt-2">
                <button id="preset-save"  class="nx-btn nx-btn-cyan">Save Preset</button>
                <button id="preset-reset" class="nx-btn">Reset Preset</button>
              </div>
            </div>

            <button id="submit-order" class="nx-btn nx-btn-cyan w-full text-base mt-2">Buy NEBULAX</button>
          </div>

          <div class="grid grid-cols-4 gap-3 mt-4 text-center text-xs">
            <div class="nx-panel p-2 tabnums"><div class="text-zinc-400">Bought</div><div>$0</div></div>
            <div class="nx-panel p-2 tabnums"><div class="text-zinc-400">Sold</div><div>$0</div></div>
            <div class="nx-panel p-2 tabnums"><div class="text-zinc-400">Holding</div><div>$0</div></div>
            <div class="nx-panel p-2 tabnums"><div class="text-zinc-400">PnL</div><div class="text-rose-400">$0 (0%)</div></div>
          </div>

          <div class="mt-3 mb-1 h-px bg-[var(--nx-border)]"></div>
          <div class="text-xs uppercase tracking-wide text-zinc-400 mb-2">Token Info</div>

          <div class="grid grid-cols-3 gap-3 text-center text-xs">
            <div class="nx-panel p-2">0%<br/><span class="text-zinc-400">Top 10 H</span></div>
            <div class="nx-panel p-2">0%<br/><span class="text-zinc-400">Dev H</span></div>
            <div class="nx-panel p-2">0%<br/><span class="text-zinc-400">Snipers H</span></div>
            <div class="nx-panel p-2">0%<br/><span class="text-zinc-400">Insiders</span></div>
            <div class="nx-panel p-2">0%<br/><span class="text-zinc-400">Bundlers</span></div>
            <div class="nx-panel p-2">0%<br/><span class="text-zinc-400">LP Burned</span></div>
            <div class="nx-panel p-2">0<br/><span class="text-zinc-400">Holders</span></div>
            <div class="nx-panel p-2">0<br/><span class="text-zinc-400">Pro Traders</span></div>
            <div class="nx-panel p-2">None<br/><span class="text-zinc-400">Dex Paid</span></div>
          </div>

          <div class="mt-3 nx-panel p-3 text-xs break-words">
            CA: <span class="text-zinc-400">fooGf...WYo9FbWTQ9sv… (mock)</span>
          </div>
        </aside>
      </main>

      <footer class="mt-3 mb-4">
        <div class="nx-panel px-3 py-2 text-xs flex items-center justify-between">
          <div class="flex items-center gap-3">
            <span class="text-zinc-400">Status:</span>
            <span class="text-emerald-400">Idle (mock)</span>
          </div>
          <div>&copy; <span id="year"></span> NebulaX • Front-end mock</div>
        </div>
      </footer>
    </div>

    <!-- Alerts Modal -->
    <div id="alerts-modal" class="hidden fixed z-[2000] top-16 right-4 w-80 popover p-3">
      <div class="flex items-center justify-between mb-2">
        <div class="text-sm font-semibold">ENABLE ALERTS</div>
        <button id="alerts-close" class="nx-btn nx-btn-cyan px-2 py-1 text-xs">Close</button>
      </div>
      <div class="space-y-2 text-sm">
        <label class="flex items-center justify-between px-2 py-1 rounded-md hover:bg-[var(--nx-dark-2)]">
          <span>Whale buy</span><input type="checkbox" value="whale_buy">
        </label>
        <label class="flex items-center justify-between px-2 py-1 rounded-md hover:bg-[var(--nx-dark-2)]">
          <span>Whale sell</span><input type="checkbox" value="whale_sell">
        </label>
        <label class="flex items-center justify-between px-2 py-1 rounded-md hover:bg-[var(--nx-dark-2)]">
          <span>Volume +</span><input type="checkbox" value="volume_spike">
        </label>
        <label class="flex items-center justify-between px-2 py-1 rounded-md hover:bg-[var(--nx-dark-2)]">
          <span>Buys &gt; Sells</span><input type="checkbox" value="buys_sells_ratio">
        </label>
        <label class="flex items-center justify-between px-2 py-1 rounded-md hover:bg-[var(--nx-dark-2)]">
          <span>Holders +</span><input type="checkbox" value="holders_delta">
        </label>
        <label class="flex items-center justify-between px-2 py-1 rounded-md hover:bg-[var(--nx-dark-2)]">
          <span>LP change</span><input type="checkbox" value="lp_change">
        </label>
      </div>
      <button id="alerts-save" class="nx-btn nx-btn-cyan w-full mt-3">Save</button>
    </div>

    <!-- Wallet dropdown -->
    <div id="wallet-dd" class="hidden fixed z-[2000] top-16 right-3 w-80 popover p-3">
      <div class="text-sm font-semibold mb-1">Wallet <span class="text-[10px] text-zinc-400">mock</span></div>
      <div class="grid grid-cols-2 gap-2 text-sm mb-2">
        <div class="nx-panel p-2">Total<br/><strong>0.314 SOL</strong></div>
        <div class="nx-panel p-2">Available<br/><strong>0.214 SOL</strong></div>
      </div>
      <div class="grid grid-cols-2 gap-2">
        <button id="wd-open" class="nx-btn">Withdraw</button>
        <button id="dp-open" class="nx-btn nx-btn-cyan">Deposit</button>
      </div>
    </div>

    <!-- Deposit / Withdraw modals -->
    <div id="deposit" class="hidden fixed inset-0 z-[2100] grid place-items-center bg-[rgba(0,0,0,.55)] p-3">
      <div class="nx-panel w-[360px] max-w-[90vw] p-3">
        <div class="flex items-center justify-between mb-2"><div class="font-semibold">Deposit</div><button class="nx-btn nx-btn-cyan px-2 py-1 text-xs" data-close="#deposit">Close</button></div>
        <div class="text-sm text-zinc-400 mb-2">Only deposit SOL to this address (mock):</div>
        <div class="nx-panel p-2 text-xs break-words">Do7AJiNrJvFVGTUCw8XvVhRGVBVLTHcBvEnfi3K68gze</div>
        <button class="nx-btn nx-btn-cyan w-full mt-3" onclick="navigator.clipboard.writeText('Do7AJiNrJvFVGTUCw8XvVhRGVBVLTHcBvEnfi3K68gze');alert('Copied! (mock)')">Copy Address</button>
      </div>
    </div>
    <div id="withdraw" class="hidden fixed inset-0 z-[2100] grid place-items-center bg-[rgba(0,0,0,.55)] p-3">
      <div class="nx-panel w-[360px] max-w-[90vw] p-3">
        <div class="flex items-center justify-between mb-2"><div class="font-semibold">Withdraw</div><button class="nx-btn nx-btn-cyan px-2 py-1 text-xs" data-close="#withdraw">Close</button></div>
        <div class="space-y-2">
          <input class="nx-input" placeholder="Destination SOL address"/>
          <div class="grid grid-cols-3 gap-2">
            <input class="nx-input col-span-2" placeholder="Amount"/>
            <select class="nx-input">
              <option>SOL</option><option>USD</option>
            </select>
          </div>
          <button class="nx-btn nx-btn-cyan w-full" onclick="alert('Submitted (mock)')">Submit (mock)</button>
        </div>
      </div>
    </div>

    <script>
      if (window.lucide && typeof window.lucide.createIcons==='function'){ window.lucide.createIcons(); }
      document.getElementById('year').textContent = new Date().getFullYear();

      /* Back */
      document.getElementById('back-btn')?.addEventListener('click', (e)=>{ e.preventDefault(); history.back(); });

      /* ====== SEARCH DROPDOWN ====== */
      const SEARCH_DATA = [
        {icon:'◎', name:'SOL / USDC', ticker:'SOL',  mc:'$13.2B', v:'$980M', l:'$120M'},
        {icon:'◈', name:'WIF / SOL',  ticker:'WIF',  mc:'$4.2B',  v:'$120M', l:'$32M'},
        {icon:'◈', name:'BONK / SOL', ticker:'BONK', mc:'$1.8B',  v:'$88M',  l:'$20M'},
      ];
      const sWrap=document.getElementById('search-wrap');
      const sIn=document.getElementById('search-input');
      const sDD=document.getElementById('search-dd');
      let activeIndex=-1, currentHits=[];

      const debounce=(fn,ms=150)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };

      function renderSearch(q){
        const query=(q||'').trim().toLowerCase();
        currentHits = query? SEARCH_DATA.filter(o => (o.name+o.ticker).toLowerCase().includes(query)) : [];
        sDD.innerHTML=''; activeIndex=-1;
        if(!currentHits.length){ sDD.classList.add('hidden'); return; }
        sDD.classList.remove('hidden');
        sDD.insertAdjacentHTML('beforeend','<div class="px-3 py-2 text-[11px] uppercase tracking-wide text-zinc-400 border-b border-[var(--nx-border)]">Results</div>');
        currentHits.forEach((o,i)=>{
          const row=document.createElement('button');
          row.type='button'; row.className='search-row w-full'; row.dataset.index=i;
          row.innerHTML=`
            <div class="search-icon">${o.icon}</div>
            <div class="search-grid min-w-0 flex-1">
              <div class="search-name min-w-0">
                <div class="truncate">${o.name}</div>
                <div class="ticker">${o.ticker}</div>
              </div>
              <div class="search-metric tabnums">MC <span class="font-semibold">${o.mc}</span></div>
              <div class="search-metric tabnums">V <span class="font-semibold">${o.v}</span></div>
              <div class="search-metric tabnums">L <span class="font-semibold">${o.l}</span></div>
            </div>`;
          row.addEventListener('click',()=>selectHit(i));
          sDD.appendChild(row);
        });
      }
      const doRender = debounce(()=>renderSearch(sIn.value),120);
      sIn.addEventListener('input', doRender);
      sIn.addEventListener('focus', doRender);
      document.addEventListener('click', (e)=>{ if(!sWrap.contains(e.target)) sDD.classList.add('hidden'); });
      sIn.addEventListener('keydown',(e)=>{
        if(sDD.classList.contains('hidden')) return;
        const rows=[...sDD.querySelectorAll('.search-row')]; if(!rows.length) return;
        if(e.key==='ArrowDown'){ e.preventDefault(); rows.forEach(r=>r.classList.remove('search-active')); activeIndex=(activeIndex+1)%rows.length; rows[activeIndex].classList.add('search-active'); rows[activeIndex].scrollIntoView({block:'nearest'}); }
        else if(e.key==='ArrowUp'){ e.preventDefault(); rows.forEach(r=>r.classList.remove('search-active')); activeIndex=(activeIndex-1+rows.length)%rows.length; rows[activeIndex].classList.add('search-active'); rows[activeIndex].scrollIntoView({block:'nearest'}); }
        else if(e.key==='Enter'){ e.preventDefault(); if(activeIndex<0) activeIndex=0; selectHit(activeIndex); }
        else if(e.key==='Escape'){ sDD.classList.add('hidden'); }
      });
      function selectHit(i){ const hit=currentHits[i]; if(!hit) return; sDD.classList.add('hidden'); sIn.value=''; alert('Navigate to '+hit.name+' (mock)'); }

      /* ====== Tabs ====== */
      const tabs=[...document.querySelectorAll('.tab')];
      const tabContent=document.getElementById('tab-content');
      const tabMap={orderbook:'Tab Content Placeholder (e.g., Order Book Data)',trades:'Recent trades stream (mock).',holders:'Top holders snapshot (mock).',toptraders:'Top trader PnL leaderboard (mock).'};
      tabs.forEach(t=>t.addEventListener('click',()=>{ tabs.forEach(x=>x.classList.remove('active')); t.classList.add('active'); tabContent.textContent=tabMap[t.dataset.tab]||''; }));

      /* ====== Market/Limit ====== */
      const tpSl=document.getElementById('tp-sl');
      const mktBtn=document.getElementById('mkt-btn');
      const limBtn=document.getElementById('lim-btn');
      function setMode(mode){
        if(mode==='market'){ mktBtn.classList.add('nx-btn-cyan'); limBtn.classList.remove('nx-btn-cyan'); tpSl.style.display=''; }
        else{ limBtn.classList.add('nx-btn-cyan'); mktBtn.classList.remove('nx-btn-cyan'); tpSl.style.display='none'; }
      }
      mktBtn.addEventListener('click', ()=>setMode('market'));
      limBtn.addEventListener('click', ()=>setMode('limit'));
      setMode('market');

      /* ====== Presets ====== */
      const DEFAULTS={1:{amount:'0.1', feeSol:'0.001', mev:true}, 2:{amount:'0.25', feeSol:'0.001', mev:true}, 3:{amount:'0.5', feeSol:'0.001', mev:true}};
      const loadPresets=()=>{ try{ return JSON.parse(localStorage.getItem('nebula_presets')) || JSON.parse(JSON.stringify(DEFAULTS)); }catch{ return JSON.parse(JSON.stringify(DEFAULTS)); } };
      const savePresets=()=> localStorage.setItem('nebula_presets', JSON.stringify(PRESETS));
      let PRESETS=loadPresets();

      const presetBtns=[...document.querySelectorAll('.preset-btn')];
      const presetCfg=document.getElementById('preset-config');
      const feeInput=document.getElementById('fee-sol');
      const mevBtn=document.getElementById('mev-btn');
      const amtInput=document.getElementById('amt');
      const saveBtn=document.getElementById('preset-save');
      const resetBtn=document.getElementById('preset-reset');
      let activePreset=null;

      function openPreset(n){
        presetBtns.forEach(b=>b.classList.remove('active'));
        document.getElementById('preset-'+n).classList.add('active');
        activePreset=String(n);
        const p=PRESETS[activePreset];
        presetCfg.classList.remove('hidden');
        amtInput.value=p.amount; feeInput.value=p.feeSol; mevBtn.textContent=p.mev?'On':'Off';
      }
      function closePreset(){ presetBtns.forEach(b=>b.classList.remove('active')); activePreset=null; presetCfg.classList.add('hidden'); }

      presetBtns.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const n=btn.dataset.preset;
          if(activePreset===n){ closePreset(); return; }
          openPreset(n);
        });
      });

      mevBtn.addEventListener('click', ()=>{ mevBtn.textContent = (mevBtn.textContent==='On')?'Off':'On'; });

      saveBtn.addEventListener('click', ()=>{
        if(!activePreset) return;
        PRESETS[activePreset] = { amount: amtInput.value || '0', feeSol: feeInput.value || '0.001', mev: (mevBtn.textContent==='On') };
        savePresets(); alert(`Saved Preset ${activePreset}`);
      });

      resetBtn.addEventListener('click', ()=>{
        if(!activePreset) return;
        PRESETS[activePreset] = {...DEFAULTS[activePreset]}; savePresets();
        const p=PRESETS[activePreset]; amtInput.value=p.amount; feeInput.value=p.feeSol; mevBtn.textContent=p.mev?'On':'Off';
        alert(`Reset Preset ${activePreset}`);
      });

      /* Buy/Sell & Submit mock */
      document.getElementById('buy-btn')?.addEventListener('click', ()=>{ document.getElementById('submit-order').textContent='Buy NEBULAX'; });
      document.getElementById('sell-btn')?.addEventListener('click', ()=>{ document.getElementById('submit-order').textContent='Sell NEBULAX'; });
      document.getElementById('submit-order')?.addEventListener('click', ()=>{
        const side=document.getElementById('submit-order').textContent.startsWith('Sell')?'Sell':'Buy';
        const feeSol=activePreset?(PRESETS[activePreset]?.feeSol||'0.001'):'—';
        const mev=activePreset?(PRESETS[activePreset]?.mev?'On':'Off'):'—';
        alert(`${side} ${amtInput.value||'0'} SOL of NEBULAX (mock)\nFee: ${feeSol} SOL\nMEV Protection: ${mev}`);
      });

      /* Alerts popover */
      const aOpen=document.getElementById('alerts-open');
      const aModal=document.getElementById('alerts-modal');
      aOpen?.addEventListener('click', ()=>aModal.classList.remove('hidden'));
      document.getElementById('alerts-close')?.addEventListener('click', ()=>aModal.classList.add('hidden'));
      document.getElementById('alerts-save')?.addEventListener('click', ()=>{
        const checks=[...aModal.querySelectorAll('input[type="checkbox"]')].filter(c=>c.checked).map(c=>c.value);
        alert('Saved alerts: '+(checks.join(', ')||'none')+' (mock)'); aModal.classList.add('hidden');
      });

      /* Wallet dropdown */
      const wBtn=document.getElementById('wallet-btn'); const wDD=document.getElementById('wallet-dd');
      wBtn?.addEventListener('click',(e)=>{ e.stopPropagation(); wDD.classList.toggle('hidden'); });
      document.addEventListener('click',(e)=>{ if(!wDD?.classList.contains('hidden') && !wDD.contains(e.target) && !wBtn.contains(e.target)) wDD.classList.add('hidden'); });
      document.getElementById('dp-open')?.addEventListener('click',()=>{ wDD.classList.add('hidden'); document.getElementById('deposit').classList.remove('hidden'); });
      document.getElementById('wd-open')?.addEventListener('click',()=>{ wDD.classList.add('hidden'); document.getElementById('withdraw').classList.remove('hidden'); });
      document.querySelectorAll('[data-close]').forEach(btn=>btn.addEventListener('click',()=>{ const id=btn.getAttribute('data-close'); document.querySelector(id)?.classList.add('hidden'); }));
      ;['deposit','withdraw'].forEach(id=>{ const el=document.getElementById(id); el?.addEventListener('click',(e)=>{ if(e.target===el) el.classList.add('hidden'); }); });
    </script>

    <!-- === Adrenaline overlay script === -->
    <script>
(() => {
  const tab = document.getElementById('adrenalineTab');
  const panel = document.getElementById('adrenalinePanel');
  const frame = document.getElementById('adrenalineFrame');
  const closeBtn = document.getElementById('adrenalineClose');
  const mainGrid = document.getElementById('mainGrid');
  if (!tab || !panel || !frame || !closeBtn) return;

  const viewBtns = Array.from(panel.querySelectorAll('.ad-view'));
  const STORAGE_KEY = 'nebula_adrenaline_view';
  let currentView = localStorage.getItem(STORAGE_KEY) || 'new';

  // 1) Load the iframe ONCE (no view param) and send the desired view after it loads
  frame.src = 'Adrenaline-official.html?embed=1';
  frame.addEventListener('load', () => { sendView(currentView, true); });

  // PostMessage to the iframe (the Adrenaline page listens for this)
  function sendView(view, scroll = true){
    try { frame.contentWindow.postMessage({ type: 'nx-ad-view', view, scroll }, '*'); } catch(e){}
  }

  function openPanel(){
    panel.classList.add('open');
    tab.setAttribute('aria-expanded','true');
    panel.setAttribute('aria-hidden','false');
    mainGrid?.classList.add('ad-open');   // create room; no overflow
  }
  function closePanel(){
    panel.classList.remove('open');
    tab.setAttribute('aria-expanded','false');
    panel.setAttribute('aria-hidden','true');
    mainGrid?.classList.remove('ad-open');
  }
  function togglePanel(){ panel.classList.contains('open') ? closePanel() : openPanel(); }

  tab.addEventListener('click', togglePanel);
  closeBtn.addEventListener('click', closePanel);
  document.addEventListener('keydown', e => { if (e.key === 'Escape') closePanel(); });

  // View buttons: open, highlight, and tell the iframe to switch & scroll
  viewBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const v = btn.dataset.view;
      if (v === currentView && panel.classList.contains('open')) return;
      currentView = v;
      localStorage.setItem(STORAGE_KEY, currentView);
      openPanel();
      setActiveButton(currentView);
      sendView(currentView, true);
    });
  });

  initView(currentView);  // only sets button state locally

  function initView(v){ setActiveButton(v); }
  function setActiveButton(v){
    viewBtns.forEach(b => {
      const active = b.dataset.view === v;
      b.classList.toggle('is-active', active);
      b.setAttribute('aria-selected', active ? 'true' : 'false');
    });
  }
})();
</script>
<script>
(function(){
  const qp = new URLSearchParams(location.search);
  const rawPair = qp.get('pair') || 'NEBULAX/SOL';
  const pair = decodeURIComponent(rawPair).replace(/\s+/g,'').toUpperCase(); // e.g. WIF/SOL
  const mint = (qp.get('mint') || '').trim();

  const [base, quote = 'SOL'] = pair.split('/');
  // Title row
  const titleEl = document.querySelector('#leftColPanel .nx-title');
  if (titleEl) titleEl.textContent = `${pair} — ${base} on ${quote}`;
  // Buy button text
  const submit = document.getElementById('submit-order');
  if (submit) submit.textContent = `Buy ${base}`;
  // Stats strip placeholders
  const statPrice = [...document.querySelectorAll('.nx-btn')].find(el => el.textContent.startsWith('Price:'));
  // (optional) update other labels as you wire data

  // Contract area
  const caBox = [...document.querySelectorAll('.nx-panel')]
    .find(el => /CA:/i.test(el.textContent));
  if (caBox && mint) caBox.innerHTML = `CA: <span class="text-zinc-400 break-all">${mint}</span>`;

  // Expose current context for other scripts
  window.NX = Object.assign({}, window.NX || {}, { pair, base, quote, mint });
})();
</script>

    <!-- === /Adrenaline overlay script === -->
<script>
/* === NebulaX Core (themes, header hydrate, routing hooks) === */
(function(){
  const UserStore={
    key:'nx_user',
    state:{ wallet:null, theme:'default', pfp:{type:'builtin',url:'/pfp/default.png'} },
    load(){ try{ Object.assign(this.state, JSON.parse(localStorage.getItem(this.key)||'{}')); }catch{} },
    save(){ localStorage.setItem(this.key, JSON.stringify(this.state)); }
  };
  UserStore.load();

  const Theme={
    init(){
      const t = UserStore.state.theme || 'default';
      document.documentElement.setAttribute('data-theme', t);
      const sel = document.getElementById('nx-theme');
      if (sel) sel.value = t;
      sel?.addEventListener('change', (e)=>{
        const v=e.target.value;
        document.documentElement.setAttribute('data-theme', v);
        UserStore.state.theme=v; UserStore.save();
      });
    }
  };

  const Header={
    initActiveTab(){
      const here = location.pathname.replace(/\/+$/,'') || '/NebulaX.html';
      document.querySelectorAll('.nx-tab').forEach(a=>{
        const route = a.getAttribute('data-route');
        if (!route) return;
        if (route===here) a.classList.add('active');
        else a.classList.remove('active');
        a.addEventListener('click',(e)=>{
          // allow normal navigation
        });
      });
    },
    initSearch(){
      const input = document.getElementById('nx-search');
      const btn   = document.getElementById('nx-search-btn');
      if(!input||!btn) return;
      const go = ()=>{
        const q = (input.value||'').trim();
        if(!q) return;
        // Route to coin page convention: /Coinpage-Official.html?query=...
        location.href = `/Coinpage-Official.html?query=${encodeURIComponent(q)}`;
      };
      btn.addEventListener('click', go);
      input.addEventListener('keydown', (e)=>{ if(e.key==='Enter') go(); });
    },
    initPfp(){
      const img = document.getElementById('nx-pfp');
      if(img) img.src = (UserStore.state.pfp?.url)||'/pfp/default.png';
      const btn = document.getElementById('nx-profile');
      btn?.addEventListener('click',()=>{
        // simple MVP: cycle built-ins; later open profile modal
        const choices=['/pfp/default.png','/pfp/nx01.png','/pfp/nx02.png'];
        const idx = Math.max(0, choices.indexOf(UserStore.state.pfp?.url));
        const next = choices[(idx+1)%choices.length];
        UserStore.state.pfp={type:'builtin',url:next}; UserStore.save();
        if(img) img.src=next;
      });
    },
    initStore(){
      const a = document.getElementById('nx-store');
      if(!a) return;
      // keep as a link; if you make a modal later, hydrate here
    },
    initWallet(){
      const w = document.getElementById('nx-wallet');
      w?.addEventListener('click', ()=>{
        // hook your wallet adapter here
        alert('Connect wallet (hook your adapter)');
      });
    },
    mount(){ this.initActiveTab(); this.initSearch(); this.initPfp(); this.initStore(); this.initWallet(); }
  };

  document.addEventListener('DOMContentLoaded', ()=>{
    Theme.init();
    Header.mount();
  });
})();
</script>

  </body>
</html>

